<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>Negotiate LLM Link Maker</title></head>
<body>
  <h1>Create a negotiation link</h1>

  <label>To:<br><input id="to"  style="width:100%"></label><br><br>
  <label>From:<br><input id="from" style="width:100%"></label><br><br>
  <label>Request:<br><textarea id="request" rows="3" style="width:100%"></textarea></label><br><br>
  <label>Context:<br><textarea id="context" rows="6" style="width:100%"></textarea></label><br><br>

  <button id="gen">Generate URL</button>

  <p id="out"></p>

  <script>
    const API = 'https://still-glade-4d20.curtisgenereux01.workers.dev';

    document.getElementById('gen').onclick = async () => {
      const payload = {
        to:      document.getElementById('to').value,
        from:    document.getElementById('from').value,
        request: document.getElementById('request').value,
        context: document.getElementById('context').value,
      };
      const r = await fetch(API + '/create', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify(payload)
      });
      if (!r.ok) return alert(await r.text());
      const { url } = await r.json();
      document.getElementById('out').innerHTML =
        `<a href="${url}" target="_blank">${url}</a>`;
    };
  </script>
</body>
</html>
